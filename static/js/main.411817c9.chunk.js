(this["webpackJsonpcards-nya"]=this["webpackJsonpcards-nya"]||[]).push([[0],{15:function(e,t,n){e.exports={login:"Login_login__1NqhM",rememberMe:"Login_rememberMe__1lr5L",error:"Login_error__14-O5"}},21:function(e,t,n){e.exports={container:"ForgotPassword_container__26ACj",error:"ForgotPassword_error__3xppo"}},32:function(e,t,n){e.exports={header:"Header_header__3xS8R"}},33:function(e,t,n){},34:function(e,t,n){e.exports={profile:"Profile_profile__3k0ZH"}},35:function(e,t,n){e.exports={inputContainer:"Input_inputContainer__2rvjo"}},36:function(e,t,n){e.exports={button:"Button_button__3zEY0"}},38:function(e,t,n){e.exports={register:"Register_register__2no2n"}},40:function(e,t,n){e.exports=n(69)},45:function(e,t,n){},46:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),s=(n(45),n(46),n(6)),u=n(32),l=n.n(u),i=n(1),m=n(33),d=n.n(m),p=n(34),f=n.n(p),h=function(){return r.a.createElement("div",{className:f.a.profile})},b=n(7),E=n(15),g=n.n(E),v=n(35),O=n.n(v),j=r.a.memo((function(e){return r.a.createElement("div",{className:O.a.inputContainer},r.a.createElement("input",{type:e.type,placeholder:e.placeholder,value:e.value,onChange:function(t){e.onChangeFunc(t.currentTarget.value)}}))})),w=n(36),_=n.n(w),y=function(e){return r.a.createElement("button",{className:_.a.button,onClick:e.onClickFunc},e.name)},R=n(8),k=n(10),S=n.n(k),C=S.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0/auth"}),N=function(e){return C.post("/login",e).then((function(e){return e.data}))},F={email:"",name:"",token:"",error:"",isAuth:!1},L=function(e){return{type:"SET-IS-AUTH",isAuth:e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER-LOGIN":return Object(R.a)({},e,{},t.userData);case"SET-ERROR":return Object(R.a)({},e,{error:t.error});case"SET-IS-AUTH":return Object(R.a)({},e,{isAuth:t.isAuth});default:return e}},U=n(4),P=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),s=Object(b.a)(o,2),u=s[0],l=s[1],m=Object(a.useState)(!1),d=Object(b.a)(m,2),p=d[0],f=d[1],h=Object(U.b)(),E=Object(U.c)((function(e){return e.login.error})),v=Object(U.c)((function(e){return e.login.isAuth})),O=Object(a.useCallback)((function(e){f(e.currentTarget.checked)}),[f]),w=Object(a.useCallback)((function(){var e;console.log({email:n,password:u,rememberMe:p}),h((e={email:n,password:u,rememberMe:p},function(t){N(e).then((function(e){e.success&&(t({type:"USER-LOGIN",userData:{email:e.email,name:e.name,token:e.token}}),t(L(!0)))})).catch((function(e){t({type:"SET-ERROR",error:e.response.data.error}),t(L(!1))}))}))}),[n,u,p,h]);return v?r.a.createElement(i.a,{to:"/profile"}):r.a.createElement("div",{className:g.a.login},r.a.createElement("div",null,"Sign In"),r.a.createElement(j,{type:"email",placeholder:"Login",onChangeFunc:c,value:n}),r.a.createElement(j,{type:"password",placeholder:"Password",onChangeFunc:l,value:u}),E&&r.a.createElement("span",{className:g.a.error},E),r.a.createElement("div",{className:g.a.rememberMe},r.a.createElement("input",{type:"checkbox",onChange:O,checked:p}),r.a.createElement("span",null,"remember me")),r.a.createElement(y,{name:"Login",onClickFunc:w}))},T=n(38),A=n.n(T),I=S.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0/"}),M=function(e){return I.post("auth/register",e)},G="cards-nya/auth/REGISTER",H={email:"",isAdmin:!1,__v:1,_id:""},B=function(e){return function(t){M(e).then((function(e){var n;!0===e.data.success?t((n=e.data.addedUser,{type:G,addedUser:n})):alert("some error")})).catch((function(e){alert("error")}))}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(R.a)({},e,{},t.addedUser);default:return e}},J=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),s=Object(b.a)(o,2),u=s[0],l=s[1],i=Object(a.useState)(""),m=Object(b.a)(i,2),d=m[0],p=m[1],f=Object(U.b)();return r.a.createElement("div",{className:A.a.register},r.a.createElement(j,{type:"text",placeholder:"e-mail",value:n,onChangeFunc:c}),r.a.createElement(j,{type:"password",placeholder:"Password",value:u,onChangeFunc:l}),r.a.createElement(j,{type:"password",placeholder:"Repeat password",value:d,onChangeFunc:p}),r.a.createElement(y,{name:"Register",onClickFunc:function(){u===d?(f(B({email:n,password:u})),c(""),l(""),p("")):alert("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442")}}))},W=n(21),q=n.n(W),z=S.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0/auth"}),Y=function(e){return z.post("/forgot",e).then((function(e){return e.data}))},Z={success:!1,error:""},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER-LOGIN":return Object(R.a)({},e,{success:t.success});case"SET-ERROR":return Object(R.a)({},e,{error:t.error});default:return e}},K=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],o=Object(U.b)(),s=Object(U.c)((function(e){return e.forgotPassword.error})),u=Object(U.c)((function(e){return e.forgotPassword.success})),l=Object(a.useCallback)((function(){o(function(e){return function(t){Y({email:e,html1:"<a href='http://localhost:3000/cards-nya#/forgot-password/'",html2:">reset-password</a>"}).then((function(e){e.success&&t({type:"USER-LOGIN",success:e.success})})).catch((function(e){t({type:"SET-ERROR",error:e.response.data.error})}))}}(n))}),[n,o]);return u?r.a.createElement(i.a,{to:"/set-new-password"}):r.a.createElement("div",{className:q.a.container},r.a.createElement("div",null,"Forgot Password"),r.a.createElement(j,{onChangeFunc:c,value:n,type:"email",placeholder:"your e-mail"}),s&&r.a.createElement("span",{className:q.a.error},s),r.a.createElement(y,{name:"Send",onClickFunc:l}))},Q=function(){return r.a.createElement("div",{className:d.a.routes},r.a.createElement(i.b,{path:"/profile",render:function(){return r.a.createElement(h,null)}}),r.a.createElement(i.b,{path:"/login",render:function(){return r.a.createElement(P,null)}}),r.a.createElement(i.b,{path:"/register",render:function(){return r.a.createElement(J,null)}}),r.a.createElement(i.b,{path:"/forgot-password",render:function(){return r.a.createElement(K,null)}}))},V=function(){return r.a.createElement("div",{className:l.a.header},r.a.createElement(s.b,{to:"/profile"},"Profile"),r.a.createElement(s.b,{to:"/login"},"Login"),r.a.createElement(s.b,{to:"/register"},"Register"),r.a.createElement(s.b,{to:"/forgot-password"},"Forgot Password"))},X=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(V,null),r.a.createElement(Q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee=n(11),te=n(39),ne={},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;return t.type,e},re=Object(ee.c)({profile:ae,login:x,register:D,forgotPassword:$}),ce=Object(ee.d)(re,Object(ee.a)(te.a));o.a.render(r.a.createElement(s.a,null,r.a.createElement(U.a,{store:ce},r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.411817c9.chunk.js.map